<!-- Exclude Scope - Exclude Categories/Products from Promotion -->
<div class="bg-white border border-red-100 rounded-lg px-4 py-3 border-2">
    <h3 class="text-sm font-semibold text-gray-900 mb-2">
        <i class="fas fa-ban text-red-600 mr-2"></i>Exclude Items (Optional)
        {% if request.current_brand %}
        <span class="text-xs font-normal text-blue-600">(Filtered by: {{ request.current_brand.name }})</span>
        {% endif %}
    </h3>
    
    <div class="mb-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800">
        <i class="fas fa-info-circle mr-1"></i>
        <strong>Note:</strong> Items selected here will be excluded from this promotion, even if they match the "Apply To" scope above.
    </div>
    
    <div class="space-y-3">
        <!-- Exclude Categories -->
        <div>
            <label class="flex items-center cursor-pointer mb-2">
                <input type="checkbox" 
                       x-model="hasExcludeCategories"
                       class="w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                <span class="ml-2 text-sm font-medium text-gray-700">Exclude Specific Categories</span>
            </label>
            
            <div x-show="hasExcludeCategories" x-transition class="ml-6">
                <button type="button"
                        @click="showExcludeCategoryModal = true"
                        class="w-full px-4 py-3 bg-red-50 border-2 border-red-300 border-dashed rounded-lg hover:bg-red-100 transition-colors">
                    <div class="flex items-center justify-center gap-2 text-red-700">
                        <i class="fas fa-ban text-lg"></i>
                        <span class="font-medium">Select Categories to Exclude</span>
                        <span class="text-xs" x-show="excludedCategoryCount > 0">
                            (<span x-text="excludedCategoryCount"></span> excluded)
                        </span>
                    </div>
                </button>
                <p class="mt-2 text-xs text-red-600">
                    <i class="fas fa-exclamation-triangle mr-1"></i>
                    All products in these categories will be excluded from promotion
                </p>
            </div>
        </div>
        
        <!-- Exclude Products -->
        <div>
            <label class="flex items-center cursor-pointer mb-2">
                <input type="checkbox" 
                       x-model="hasExcludeProducts"
                       class="w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500">
                <span class="ml-2 text-sm font-medium text-gray-700">Exclude Specific Products</span>
            </label>
            
            <div x-show="hasExcludeProducts" x-transition class="ml-6">
                <button type="button"
                        @click="showExcludeProductModal = true"
                        class="w-full px-4 py-3 bg-red-50 border-2 border-red-300 border-dashed rounded-lg hover:bg-red-100 transition-colors">
                    <div class="flex items-center justify-center gap-2 text-red-700">
                        <i class="fas fa-ban text-lg"></i>
                        <span class="font-medium">Select Products to Exclude</span>
                        <span class="text-xs" x-show="excludedProductCount > 0">
                            (<span x-text="excludedProductCount"></span> excluded)
                        </span>
                    </div>
                </button>
                <p class="mt-2 text-xs text-red-600">
                    <i class="fas fa-exclamation-triangle mr-1"></i>
                    These specific products will be excluded from promotion
                </p>
            </div>
        </div>
    </div>
</div>
