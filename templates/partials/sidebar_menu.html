<!-- Minimal Clean Sidebar Menu -->

<!-- Dashboard -->
<div class="group">
    <a href="{% url 'dashboard:index' %}" class="flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200
              {% if request.resolver_match.url_name == 'index' %}
                  bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-500/50
              {% else %}
                  text-gray-700 hover:bg-gray-100 hover:shadow-md
              {% endif %}">
        <div class="flex-shrink-0 w-6 flex items-center justify-center">
            <i
                class="fas fa-chart-line {% if request.resolver_match.url_name == 'index' %}text-white{% else %}text-blue-600{% endif %}"></i>
        </div>
        <span x-show="!$root.sidebarCollapsed" class="font-medium">Dashboard</span>
    </a>
</div>

<!-- User Management -->
<div x-data="{ 
    expanded: localStorage.getItem('menu_user') === 'true',
    toggle() {
        this.expanded = !this.expanded;
        localStorage.setItem('menu_user', this.expanded);
    }
}" class="group">
    <button type="button" @click="toggle()"
        class="w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200
               {% if 'user' in request.path %}bg-blue-50 text-blue-700{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 w-6 flex items-center justify-center">
                <i
                    class="fas fa-users-cog {% if 'user' in request.path %}text-blue-600{% else %}text-indigo-600{% endif %}"></i>
            </div>
            <span x-show="!$root.sidebarCollapsed" class="font-medium">User Management</span>
        </div>
        <i x-show="!$root.sidebarCollapsed" class="fas fa-chevron-down text-xs transition-transform duration-200"
            :class="expanded ? 'rotate-180' : ''"></i>
    </button>

    <!-- Submenu -->
    <div x-show="expanded && !$root.sidebarCollapsed" x-transition
        class="mt-1 ml-6 space-y-1 border-l-2 border-blue-200 pl-4">
        <a href="{% url 'user:list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'user/list' in request.path %}text-blue-700 bg-blue-50 font-medium{% else %}text-gray-600 hover:text-gray-900 hover:bg-gray-50{% endif %}">
            <i class="fas fa-users w-4"></i>
            <span>All Users</span>
        </a>
    </div>
</div>

<!-- Divider -->
<div class="my-3 border-t border-gray-200"></div>

<!-- Initial Setup Section -->
<div x-data="{ 
    expanded: localStorage.getItem('menu_initial_setup') === 'true',
    toggle() {
        this.expanded = !this.expanded;
        localStorage.setItem('menu_initial_setup', this.expanded);
    }
}">
    <button @click="toggle()"
        class="w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200
               bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 hover:border-amber-300 hover:shadow-md">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 w-6 flex items-center justify-center">
                <i class="fas fa-cog text-amber-600 animate-pulse"></i>
            </div>
            <span x-show="!$root.sidebarCollapsed" class="font-semibold text-amber-900">Initial Setup</span>
        </div>
        <i x-show="!$root.sidebarCollapsed"
            class="fas fa-chevron-down text-xs text-amber-600 transition-transform duration-200"
            :class="expanded ? 'rotate-180' : ''"></i>
    </button>

    <!-- Submenu -->
    <div x-show="expanded && !$root.sidebarCollapsed" x-transition
        class="mt-1 ml-6 space-y-1 border-l-2 border-amber-300 pl-4">
        <!-- Company -->
        <a href="{% url 'company:list' %}"
            class="flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm transition-all duration-200
                  {% if 'company' in request.path %}bg-blue-50 text-blue-700 font-medium shadow-sm{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <span
                class="flex-shrink-0 w-6 h-6 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center text-xs font-bold">1</span>
            <span class="font-medium">Company</span>
        </a>

        <!-- Brand -->
        <a href="{% url 'brand:list' %}"
            class="flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm transition-all duration-200
                  {% if 'brand' in request.path %}bg-indigo-50 text-indigo-700 font-medium shadow-sm{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <span
                class="flex-shrink-0 w-6 h-6 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center text-xs font-bold">2</span>
            <span class="font-medium">Brand</span>
        </a>

        <!-- Store -->
        <a href="{% url 'store:list' %}"
            class="flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm transition-all duration-200
                  {% if 'store' in request.path %}bg-green-50 text-green-700 font-medium shadow-sm{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <span
                class="flex-shrink-0 w-6 h-6 rounded-full bg-green-100 text-green-700 flex items-center justify-center text-xs font-bold">3</span>
            <span class="font-medium">Store</span>
        </a>
    </div>
</div>

<!-- Divider -->
<div class="my-3 border-t border-gray-200"></div>

<!-- Master Data Section -->
<div x-data="{ 
    expanded: localStorage.getItem('menu_master_data') === 'true',
    toggle() {
        this.expanded = !this.expanded;
        localStorage.setItem('menu_master_data', this.expanded);
    }
}">
    <button @click="toggle()"
        class="w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 text-gray-700 hover:bg-gray-100">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 w-6 flex items-center justify-center">
                <i class="fas fa-database text-purple-600"></i>
            </div>
            <span x-show="!$root.sidebarCollapsed" class="font-semibold">Master Data</span>
        </div>
        <i x-show="!$root.sidebarCollapsed" class="fas fa-chevron-down text-xs transition-transform duration-200"
            :class="expanded ? 'rotate-180' : ''"></i>
    </button>

    <!-- Submenu -->
    <div x-show="expanded && !$root.sidebarCollapsed" x-transition
        class="mt-1 ml-6 space-y-1 border-l-2 border-purple-200 pl-4">

        <!-- Products -->
        <div x-data="{expanded: false}">
            <button @click="expanded = !expanded"
                class="w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-all duration-200
                           {% if 'product' in request.path or 'category' in request.path or 'modifier' in request.path %}text-purple-700 bg-purple-50{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-shopping-bag w-4"></i>
                    <span>Products</span>
                </div>
                <i class="fas fa-chevron-down text-xs transition-transform duration-200"
                    :class="expanded ? 'rotate-180' : ''"></i>
            </button>
            <div x-show="expanded" x-transition class="mt-1 ml-4 space-y-1">
                <a href="{% url 'product:list' %}"
                    class="block px-3 py-1.5 text-xs rounded-lg transition-colors {% if 'product/list' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-600 hover:text-gray-900 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-box w-3 mr-2"></i>Products
                </a>
                <a href="{% url 'category:list' %}"
                    class="block px-3 py-1.5 text-xs rounded-lg transition-colors {% if 'category' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-600 hover:text-gray-900 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-tags w-3 mr-2"></i>Categories
                </a>
                <a href="{% url 'modifier:list' %}"
                    class="block px-3 py-1.5 text-xs rounded-lg transition-colors {% if 'modifier' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-600 hover:text-gray-900 hover:bg-gray-50{% endif %}">
                    <i class="fas fa-sliders-h w-3 mr-2"></i>Modifiers
                </a>
            </div>
        </div>

        <!-- Table Areas -->
        <a href="{% url 'tablearea:enhanced_list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'tablearea' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-map w-4"></i>
            <span>Table Areas</span>
        </a>

        <!-- Kitchen Stations -->
        <a href="{% url 'kitchenstation:list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'kitchenstation' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-fire w-4"></i>
            <span>Kitchen Stations</span>
        </a>

        <!-- Promotions Group -->
        <div x-data="{ 
            expanded: localStorage.getItem('menu_promotions') === 'true',
            toggle() {
                this.expanded = !this.expanded;
                localStorage.setItem('menu_promotions', this.expanded);
            }
        }">
            <!-- Group Header -->
            <button @click="toggle()"
                class="w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-all duration-200
                           {% if 'promotion' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-percent w-4"></i>
                    <span>Promotions</span>
                </div>
                <i class="fas fa-chevron-down text-xs transition-transform duration-200"
                    :class="{'rotate-180': expanded}"></i>
            </button>

            <!-- Submenu -->
            <div x-show="expanded" x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 transform scale-95"
                x-transition:enter-end="opacity-100 transform scale-100"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 transform scale-100"
                x-transition:leave-end="opacity-0 transform scale-95"
                class="ml-4 mt-1 space-y-1 border-l-2 border-gray-200 pl-3">

                <!-- Manage Promotions -->
                <a href="{% url 'promotion:list' %}"
                    class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                          {% if request.path == '/promotions/' or 'promotion/create' in request.path or 'promotion/edit' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-600 hover:bg-gray-50 hover:text-gray-900{% endif %}">
                    <i class="fas fa-list w-4"></i>
                    <span>Manage Promotions</span>
                </a>

                <!-- Compiler & Sync -->
                <a href="{% url 'promotion:compiler_dashboard' %}"
                    class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                          {% if 'compiler' in request.path and 'settings' not in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-600 hover:bg-gray-50 hover:text-gray-900{% endif %}">
                    <i class="fas fa-cogs w-4"></i>
                    <span>Compiler & Sync</span>
                </a>


            </div>
        </div>

        <!-- Members -->
        <a href="{% url 'member:list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'member' in request.path %}text-purple-700 bg-purple-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-id-card w-4"></i>
            <span>Members</span>
        </a>
    </div>
</div>

<!-- Divider -->
<div class="my-3 border-t border-gray-200"></div>

<!-- Inventory Section - Level 1 -->
<div x-data="{ 
    expanded: localStorage.getItem('menu_inventory') === 'true',
    toggle() {
        this.expanded = !this.expanded;
        localStorage.setItem('menu_inventory', this.expanded);
    }
}">
    <button @click="toggle()"
        class="w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 text-gray-700 hover:bg-gray-100">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 w-6 flex items-center justify-center">
                <i class="fas fa-boxes text-orange-600"></i>
            </div>
            <span x-show="!$root.sidebarCollapsed" class="font-semibold">Inventory</span>
        </div>
        <i x-show="!$root.sidebarCollapsed" class="fas fa-chevron-down text-xs transition-transform duration-200"
            :class="expanded ? 'rotate-180' : ''"></i>
    </button>

    <!-- Submenu -->
    <div x-show="expanded && !$root.sidebarCollapsed" x-transition
        class="mt-1 ml-6 space-y-1 border-l-2 border-orange-200 pl-4">
        <a href="{% url 'inventoryitem:list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'inventoryitem' in request.path %}text-orange-700 bg-orange-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-warehouse w-4"></i>
            <span>Items</span>
        </a>
        <a href="{% url 'recipe:list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'recipe' in request.path %}text-orange-700 bg-orange-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-receipt w-4"></i>
            <span>Recipes</span>
        </a>
        <a href="{% url 'stockmovement:list' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'stockmovement' in request.path %}text-orange-700 bg-orange-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-exchange-alt w-4"></i>
            <span>Stock Movement</span>
        </a>
    </div>
</div>

<!-- Divider -->
<div class="my-3 border-t border-gray-200"></div>

<!-- Reports & Analytics -->
<div x-data="{ 
    expanded: localStorage.getItem('menu_reports') === 'true',
    toggle() {
        this.expanded = !this.expanded;
        localStorage.setItem('menu_reports', this.expanded);
    }
}">
    <button @click="toggle()"
        class="w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 text-gray-700 hover:bg-gray-100">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 w-6 flex items-center justify-center">
                <i class="fas fa-chart-bar text-emerald-600"></i>
            </div>
            <span x-show="!$root.sidebarCollapsed" class="font-semibold">Reports</span>
        </div>
        <i x-show="!$root.sidebarCollapsed" class="fas fa-chevron-down text-xs transition-transform duration-200"
            :class="expanded ? 'rotate-180' : ''"></i>
    </button>

    <!-- Submenu -->
    <div x-show="expanded && !$root.sidebarCollapsed" x-transition
        class="mt-1 ml-6 space-y-1 border-l-2 border-emerald-200 pl-4">
        <a href="{% url 'analytics:sales-report' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'sales-report' in request.path %}text-emerald-700 bg-emerald-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-dollar-sign w-4"></i>
            <span>Sales Report</span>
        </a>
        <a href="{% url 'analytics:product-performance' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'product-performance' in request.path %}text-emerald-700 bg-emerald-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-chart-pie w-4"></i>
            <span>Product Performance</span>
        </a>
        <a href="{% url 'analytics:hourly-sales' %}"
            class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-all duration-200
                  {% if 'hourly-sales' in request.path %}text-emerald-700 bg-emerald-50 font-medium{% else %}text-gray-700 hover:bg-gray-50{% endif %}">
            <i class="fas fa-clock w-4"></i>
            <span>Hourly Sales</span>
        </a>
    </div>
</div>

<!-- Divider -->
<div class="my-3 border-t border-gray-200"></div>

<!-- Settings -->
<div class="mb-4">
    <a href="#"
        class="flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 text-gray-700 hover:bg-gray-100">
        <div class="flex-shrink-0 w-6 flex items-center justify-center">
            <i class="fas fa-cog text-gray-500"></i>
        </div>
        <span x-show="!$root.sidebarCollapsed" class="font-medium">Settings</span>
    </a>
</div>